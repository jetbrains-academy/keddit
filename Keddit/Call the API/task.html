<html>
<p><b>NewsManager: Call the Api!</b></p>
<p>We are going to use default parameters to initialize our RestApi class in this way:</p>
<pre><code>class NewsManager(private val api: RestAPI = RestAPI()) {
     ...
}</code></pre>
<p>Also updating the Observable definition to call this Api and perform the request:</p>
<pre><code>subscriber ->
val callResponse = api.getNews("", limit)
val response = callResponse.execute()

if (response.isSuccessful) {
    val news = response.body().data.children.map {
        val item = it.data
        RedditNewsItem(item.author, item.title, item.num_comments,
                item.created, item.thumbnail, item.url)
    }
    subscriber.onNext(news)
    subscriber.onCompleted()
} else {
    subscriber.onError(Throwable(response.message()))
}</code></pre>
<ol><li>callResponse.execute(): This will execute the request synchronously.</li>
    <li>response.body().data.children.map {…}: Here we use the List function “map” to transform every children into a RedditNewsItem.</li>
    <li>it.data: “it” is a short way to access a single parameter from the lambda expression. This is only valid when you receive just one parameter, otherwise for more parameters you have to specify it, for example with two parameters it looks like this “x, y -> …”.</li>
    <li>subscriber.onError(): We are creating a new Throwable object with the response.message() that we receive from the service.</li></ol>
<p>With this last changes we are now showing the first 10 news from Reddit in our app </p>
</html>